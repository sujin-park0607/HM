{"ast":null,"code":"import _slicedToArray from\"C:/sujinworkspace/test_capstone/peoplecountfrount/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/sujinworkspace/test_capstone/peoplecountfrount/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React from'react';import styled from'styled-components';import{useState,useEffect}from'react';import axios from'axios';import{AiOutlineTeam}from\"react-icons/ai\";import{BsFillPeopleFill}from\"react-icons/bs\";import{LocalizationProvider}from'@mui/x-date-pickers/LocalizationProvider';import{AdapterDateFns}from'@mui/x-date-pickers/AdapterDateFns';import{DesktopDatePicker}from'@mui/x-date-pickers/DesktopDatePicker';import TextField from'@mui/material/TextField';import moment from\"moment\";import{ResponsiveContainer,PieChart,Pie,Cell,BarChart,Bar,CartesianGrid,XAxis,YAxis,Tooltip,Legend}from'recharts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var GraphView=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 85%;\\n  height:85%;\\n  display:flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction:column;\\n  .title{\\n    width:100%;\\n    height:20%;\\n    color:black;\\n    font-size:17px;\\n    font-weight:700;\\n  }\\n  .Graph{\\n    border:1px solid;\\n  }\\n\"])));var SubGraph=function SubGraph(_ref){var view=_ref.view,type=_ref.type,date=_ref.date,mainButton=_ref.mainButton;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),countStatus=_useState2[0],setCountStatus=_useState2[1];useEffect(function(){if(view!=='실시간통계'){axios.get(\"http://localhost:8000/api/sub\".concat(mainButton,\"/\")).then(function(res){if(mainButton===\"year\"){var dataTemp=res.data[\"subyear\"][0][\"total\"];setCountStatus(dataTemp);}else if(mainButton===\"month\"){var _dataTemp=res.data[\"submonth\"][\"\".concat(date).split(\"-\")[0]];setCountStatus(_dataTemp);}else if(mainButton===\"day\"){var _dataTemp2=res.data[\"subday\"][0][[\"\".concat(date).split(\"-\")[0]]][0][\"\".concat(date).split(\"-\")[1]];setCountStatus(_dataTemp2);}else{var _dataTemp3=res.data[\"subtime\"][\"\".concat(date).split(\"-\")[0]][0][\"\".concat(date).split(\"-\")[1]][0][\"\".concat(date).split(\"-\")[2]];setCountStatus(_dataTemp3);}});}else{axios.get(\"http://localhost:8000/api/subnow/\").then(function(res){console.log(res.data['subnow']);var dataTemp=res.data['subnow'];setCountStatus(dataTemp);});}},[view,type,mainButton,date]);var colors=[\"#00ADFF\",\"#005FD9\",\"#04BFAD\",\"#FF8042\",\"#EB6AC8\"];var CustomTooltip=function CustomTooltip(_ref2){var active=_ref2.active,payload=_ref2.payload,label=_ref2.label;if(active){return/*#__PURE__*/_jsx(\"div\",{className:\"custom-tooltip\",style:{backgroundColor:'#ffff',padding:'5px',border:'1px solid #cccc'},children:/*#__PURE__*/_jsx(\"label\",{children:\"\".concat(payload[0].name,\" : \").concat(payload[0].value,\"%\")})});}return null;};return/*#__PURE__*/_jsx(GraphView,{children:countStatus.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[\"\\uC720\\uB3D9\\uC778\\uAD6C \\uBE44\\uAD50 (\",countStatus[0][0].name,\"~\",countStatus[0][countStatus[0].length-1].name,\")\"]}),type===\"circle\"&&/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{startAngle:90,endAngle:450,data:countStatus[0],dataKey:\"value\",nameKey:\"name\",cx:\"50%\",cy:\"50%\",outerRadius:\"100%\",children:countStatus[0].map(function(entry,index){return/*#__PURE__*/_jsx(Cell,{fill:colors[index%colors.length]},\"cell-\".concat(index));})},Math.random()),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{})}),/*#__PURE__*/_jsx(Legend,{iconSize:\"17\",width:\"100%\"})]})}),type===\"bar\"&&/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(BarChart,{data:countStatus[1],margin:{top:20,right:0,bottom:0,left:-10},children:[/*#__PURE__*/_jsx(CartesianGrid,{stroke:\"#f5f5f5\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{allowDataOverflow:false,type:\"number\",domain:[0,\"auto\"]}),/*#__PURE__*/_jsx(Bar,{height:10,dataKey:\"value\",barSize:55,fill:\"#413ea0\",children:countStatus[1].map(function(entry,index){return/*#__PURE__*/_jsx(Cell,{fill:colors[index%colors.length]},\"cell-\".concat(index));})},Math.random()),/*#__PURE__*/_jsx(Tooltip,{})]})})]})});};export default SubGraph;","map":{"version":3,"names":["React","styled","useState","useEffect","axios","AiOutlineTeam","BsFillPeopleFill","LocalizationProvider","AdapterDateFns","DesktopDatePicker","TextField","moment","ResponsiveContainer","PieChart","Pie","Cell","BarChart","Bar","CartesianGrid","XAxis","YAxis","Tooltip","Legend","GraphView","div","SubGraph","view","type","date","mainButton","countStatus","setCountStatus","get","then","res","dataTemp","data","split","console","log","colors","CustomTooltip","active","payload","label","backgroundColor","padding","border","name","value","length","map","entry","index","Math","random","top","right","bottom","left"],"sources":["C:/sujinworkspace/test_capstone/peoplecountfrount/src/pages/SubGraph.js"],"sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios'\nimport { AiOutlineTeam } from \"react-icons/ai\"\nimport { BsFillPeopleFill } from \"react-icons/bs\"\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { DesktopDatePicker } from '@mui/x-date-pickers/DesktopDatePicker';\nimport TextField from '@mui/material/TextField';\nimport moment from \"moment\";\n\nimport {\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n  BarChart,\n  Bar,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  Tooltip,\n  Legend,\n} from 'recharts';\n\nconst GraphView = styled.div`\n  width: 85%;\n  height:85%;\n  display:flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction:column;\n  .title{\n    width:100%;\n    height:20%;\n    color:black;\n    font-size:17px;\n    font-weight:700;\n  }\n  .Graph{\n    border:1px solid;\n  }\n`;\n\nconst SubGraph = ({view, type, date, mainButton }) => {\n  const [countStatus, setCountStatus] = useState([]);\n\n  useEffect(() => {\n    if(view!=='실시간통계'){\n      axios.get(`http://localhost:8000/api/sub${mainButton}/`)\n      .then((res) => {\n        if(mainButton === \"year\"){\n          const dataTemp = res.data[\"subyear\"][0][\"total\"]  \n          setCountStatus(dataTemp)\n        }else if(mainButton === \"month\"){\n          const dataTemp = res.data[\"submonth\"][`${date}`.split(\"-\")[0]];\n          setCountStatus(dataTemp)\n        }else if(mainButton === \"day\"){\n          const dataTemp = res.data[\"subday\"][0][[`${date}`.split(\"-\")[0]]][0][`${date}`.split(\"-\")[1]]\n          setCountStatus(dataTemp)\n        }else{\n          const dataTemp = res.data[\"subtime\"][`${date}`.split(\"-\")[0]][0][`${date}`.split(\"-\")[1]][0][`${date}`.split(\"-\")[2]]\n          setCountStatus(dataTemp)\n        }\n      });\n    }else{\n      axios.get(`http://localhost:8000/api/subnow/`)\n      .then((res) => {\n        console.log(res.data['subnow'])\n        const dataTemp = res.data['subnow']\n        setCountStatus(dataTemp)\n      });\n    }\n\n  }, [ view, type, mainButton, date]);\n  const colors = [\"#00ADFF\",\"#005FD9\", \"#04BFAD\", \"#FF8042\", \"#EB6AC8\"];\n\n  const CustomTooltip = ({ active, payload, label }) => {\n    if (active) {\n        return (\n            <div className=\"custom-tooltip\" style={{ backgroundColor: '#ffff', padding: '5px', border: '1px solid #cccc' }}>\n                <label>{`${payload[0].name} : ${payload[0].value}%`}</label>\n            </div>\n        );\n    }\n    return null;\n};\n  return <GraphView>\n    {countStatus.length > 0 && <>\n      <div className='title'>유동인구 비교 ({countStatus[0][0].name}~{countStatus[0][countStatus[0].length-1].name})</div>\n      {/* <div className='title'>유동인구 비교(%)</div> */}\n      {type === \"circle\" &&\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <PieChart>\n            <Pie key={Math.random()} startAngle={90} endAngle={450} data={countStatus[0]} dataKey=\"value\" nameKey=\"name\" cx=\"50%\" cy=\"50%\" outerRadius=\"100%\" >\n                {\n                  countStatus[0].map((entry, index) => <Cell key={`cell-${index}`} fill={colors[index % colors.length]} />)\n                }\n            </Pie>\n            <Tooltip  content={<CustomTooltip />} />\n            <Legend iconSize=\"17\"  width=\"100%\" />\n          </PieChart> \n        </ResponsiveContainer>\n      }\n      {type === \"bar\" &&\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <BarChart data={countStatus[1]} margin={{top: 20, right: 0, bottom: 0, left: -10,}}>\n            <CartesianGrid stroke=\"#f5f5f5\" />\n            <XAxis dataKey=\"name\" />\n            <YAxis \n              allowDataOverflow={false} \n              type=\"number\" \n              domain={[0, \"auto\"]}\n            />\n            <Bar key={Math.random()} height={10} dataKey=\"value\" barSize={55} fill=\"#413ea0\">\n            {\n              countStatus[1].map((entry, index) => <Cell key={`cell-${index}`} fill={colors[index % colors.length]} />)\n            }\n            </Bar>\n            <Tooltip/>\n          </BarChart> \n        </ResponsiveContainer>\n      }\n    </>\n    }\n  </GraphView>\n};\n\nexport default SubGraph;"],"mappings":"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"},"metadata":{},"sourceType":"module"}